<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sendit!</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>
<body>
<div class="topnav">
    <div class="allign-right">
        <a class="active"><span>Home</span></a>
        <a id="left-login"><span>login</span></a>
    </div>
</div>
<div class="container">
    <div class="forms_container content">
        <div class="header">
            Admin Registration
        </div>
        <div class="subheader">
            Please provide the following information
        </div>
        <form class="normaltext" id="form1">
            <label><i class="fa fa-envelope"></i>Email</label><br>
            <input type="email" required placeholder="chirchir@gmail.com" id="email"><br>
            <label class="fa  fa-user">full name</label><br>
            <input type="text" required placeholder="Chirchir Kibet" id="fullname"><br>
            <label class="fa fa-phone">Phone number</label><br>
            <input type="number" required placeholder="254715428709" id="phonenumber"><br>
            <label class="fa fa-key">password</label><br>
            <input type="password" required placeholder="**********" id="password"><br>
            <label class="fa fa-key">confirm password</label><br>
            <input type="password" required placeholder="******" id="password1"><br>
            <button type="cancel" id="button_failed" form="form1" value="cancel">Cancel</button>
            <button type="button" onClick="signUp()" id="button_success">Submit</button>
        </form>
    </div>
    <div class="footnote">
        <i>find us on<br><i></i>
        <a href="https://www.twitter.com/"><i class="fa fa-twitter" id="objects">twitter</i></a><br>
        <a href="https://www.facebook.com"><span class="fa fa-facebook" id="objects">facebook</span></a><br>
        <a href="https://github.com/Kibetchirchir"><span class="fa fa-github" id="objects">github</span></a><br>
        <a href="https://www.youtube.com"><span class="fa fa-youtube" id="youtube_object">youtube</span></a><br>

        <i> copyright sendit <span class="fa fa-copyright">2018
    </div>
</div>
<script>
    function signUp() {
        // getting the form values
        let email = document.getElementById("email").value;
        let fullname = document.getElementById("fullname").value;
        let phonenumber = document.getElementById("phonenumber").value;
        let password = document.getElementById("password").value;
        let password1 = document.getElementById("password1").value;
        let signup_url = "https://senditv2.herokuapp.com/api/v2/auth/signup";
        // Checking if the password and confirmation password is same
        if(password != password1){
            alert("password does not match")
        }
        let signup_data = {
            email : email,
            name : fullname,
            phonenumber : phonenumber,
            password : password,
            role : "admin"
        }
        // sending data to our end point
        fetch(signup_url, {
            method: 'POST',
            body: JSON.stringify(signup_data),
            headers:{
                'Content-Type': 'application/json'
            }
        })
        .then(res => res.json())
        .then(response => {
            if(response.status === "added"){
                alert("successfully added")
                window.location.href='adminlogin.html';
            } else {
                alert(response.message)
            }
        })
        .catch(error => alert("OOPS try again"));
}
</script>
</body>
</html>
